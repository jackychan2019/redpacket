(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-city-city"],{2839:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.select-page[data-v-5b5b5bc3]{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;height:100%}.select-page .scroll-list-panel[data-v-5b5b5bc3]{height:inherit}.select-page .scroll-list-panel .title[data-v-5b5b5bc3]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box}.select-page .scroll-list-panel .list[data-v-5b5b5bc3]{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 0 0 %?30?%}.select-page .scroll-list-panel .list uni-text[data-v-5b5b5bc3]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box}.select-page .scroll-list-panel .list uni-text[data-v-5b5b5bc3]:last-child{border:none!important}.select-page .now-sort[data-v-5b5b5bc3]{position:absolute;top:0;left:0;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box}.select-page .now-letter[data-v-5b5b5bc3]{font-size:%?160?%;position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);opacity:0}.select-page .now-letter.fadeIn[data-v-5b5b5bc3]{-webkit-animation:fade-data-v-5b5b5bc3 1s linear 0ms;animation:fade-data-v-5b5b5bc3 1s linear 0ms}.select-page .letter-nav[data-v-5b5b5bc3]{width:%?100?%;position:fixed;top:55%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);right:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;text-align:center;z-index:99999}.base-wrap-history[data-v-5b5b5bc3]{overflow:hidden;padding:0 %?50?% 0 %?20?%}.base-wrap-history .title[data-v-5b5b5bc3]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:%?28?%;color:#999;height:%?60?%}.base-wrap-history .panel[data-v-5b5b5bc3]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.base-wrap-history .panel .current-item[data-v-5b5b5bc3]{background-color:#ffd940!important}.base-wrap-history .panel .history-icon[data-v-5b5b5bc3]{font-size:%?30?%;margin-right:%?10?%;color:#333}.base-wrap-history .panel .item[data-v-5b5b5bc3]{display:inline-block;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;text-align:center;width:%?160?%;height:%?60?%;line-height:%?60?%;overflow:hidden;font-size:%?28?%;border-radius:%?60?%;padding:0 %?20?%;margin-top:%?20?%;color:#333;margin-right:%?8?%;background-color:#f6f6f6}.base-wrap-history .panel[data-v-5b5b5bc3]:after{display:block;content:"";width:%?200?%;border:1px solid rgba(0,0,0,0)}@-webkit-keyframes fade-data-v-5b5b5bc3{0%{opacity:0;display:block!important}50%{opacity:.4}to{display:none;opacity:0!important}}@keyframes fade-data-v-5b5b5bc3{0%{opacity:0;display:block!important}50%{opacity:.4}to{display:none;opacity:0!important}}[data-v-5b5b5bc3]::-webkit-scrollbar{width:0;height:0;background-color:rgba(0,0,0,0)}',""])},"3dd4":function(t,e,i){"use strict";i.r(e);var n=i("b413"),a=i("5480");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("98a4");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"63051abc",null);e["default"]=s.exports},5480:function(t,e,i){"use strict";i.r(e);var n=i("cbe7"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},"70ab":function(t,e,i){"use strict";var n=i("fb94"),a=i.n(n);a.a},"7e8e":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"select-page"},[t.isSearch?t._e():[i("v-uni-scroll-view",{staticClass:"scroll-list-panel",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"scroll-with-animation":"true"},on:{scroll:function(e){e=t.$handleEvent(e),t.scroll(e)}}},[t.currentCity?i("v-uni-view",{staticClass:"base-wrap-history"},[i("v-uni-view",{staticClass:"title"},[t._v("当前城市")]),i("v-uni-view",{staticClass:"panel"},[i("v-uni-text",{staticClass:"item current-item",on:{click:function(e){e=t.$handleEvent(e),t.chooseItem(t.currentCity["ad_info"])}}},[i("v-uni-text",{staticClass:"history-icon iconfont icon-locationfill"},[t._v(t._s(t.currentCity["ad_info"]["city"]))])],1)],1)],1):t._e(),t.recenCity&&t.recenCity.length>0?i("v-uni-view",{staticClass:"base-wrap-history"},[i("v-uni-view",{staticClass:"title"},[t._v("最近访问的城市")]),i("v-uni-view",{staticClass:"panel"},t._l(t.recenCity,function(e,n){return n<3?i("v-uni-text",{key:n,staticClass:"item",on:{click:function(i){i=t.$handleEvent(i),t.chooseItem(e)}}},[t._v(t._s(e["ad_info"]?e["ad_info"]["city"]:e["name"]))]):t._e()}),1)],1):t._e(),i("v-uni-view",{staticClass:"base-wrap-history m-btm40"},[i("v-uni-view",{staticClass:"title"},[t._v("热门城市")]),i("v-uni-view",{staticClass:"panel"},t._l(t.quickPanelData,function(e,n){return i("v-uni-text",{key:n,staticClass:"item",on:{click:function(i){i=t.$handleEvent(i),t.chooseItem(e)}}},[t._v(t._s(e["name"]))])}),1)],1),i("v-uni-view",{staticClass:"main-wrap"},t._l(t.listData,function(e,n){return i("v-uni-view",{key:n,staticClass:"sort-wrap",style:{backgroundColor:t.getListAttrListBackgroundColor},attrs:{id:"view"+n}},[i("v-uni-view",{staticClass:"title",style:{fontSize:t.getListAttrTitleFontSize,color:t.getListAttrTitleColor,height:t.getListAttrTitleHeight,background:t.getListAttrTitleBackground,paddingLeft:t.getListAttrTitlePadding}},[t._v(t._s(e["initial"]))]),i("v-uni-view",{staticClass:"list"},t._l(e.list,function(e,n){return i("v-uni-text",{key:n,style:{height:t.getListAttrItemHeight,fontSize:t.getListAttrItemFontSize,borderBottom:t.getListAttrItemBorderBottom,color:t.getListAttrItemColor,background:t.getListAttrItemBackgroundColor},on:{click:function(i){i=t.$handleEvent(i),t.chooseItem(e)}}},[t._v(t._s(e["name"]))])}),1)],1)}),1)],1),t.activeIndex?i("v-uni-view",{class:["now-letter",t.fadeFlag?"fadeIn":""]},[t._v(t._s(t.getNavData[t.activeIndex]))]):t._e(),t.navAttr.enable?i("v-uni-view",{staticClass:"letter-nav",style:{backgroundColor:t.getNavAttrbackgroundColor,padding:t.getNavAttrPadding,borderRadius:t.getNavAttrBorderRadius}},t._l(t.getNavData,function(e,n){return i("v-uni-text",{key:n,class:["item",n===t.activeIndex?"active":""],style:{fontSize:t.getNavAttrFontSize,color:n===t.activeIndex?t.getNavAttrActiveColor:t.getNavAttrColor,padding:t.getNavAttrItemPadding},on:{click:function(e){e=t.$handleEvent(e),t.scrollSelect(n)}}},[t._v(t._s(e))])}),1):t._e()],t.isSearch?[i("v-uni-view",{staticClass:"base-wrap-history"},[i("v-uni-view",{staticClass:"title"},[t._v("目前搜索的城市")]),i("v-uni-view",{staticClass:"panel"},t._l(t.searchCitylist,function(e,n){return i("v-uni-text",{key:n,staticClass:"item",on:{click:function(i){i=t.$handleEvent(i),t.chooseItem(e)}}},[t._v(t._s(e.name))])}),1)],1)]:t._e()],2)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"98a4":function(t,e,i){"use strict";var n=i("eb46"),a=i.n(n);a.a},"99a1":function(t,e,i){"use strict";i.r(e);var n=i("7e8e"),a=i("ec98");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("70ab");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"5b5b5bc3",null);e["default"]=s.exports},b052:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.content[data-v-63051abc]{height:100vh}.content .history-main[data-v-63051abc]{height:%?120?%;padding:0 %?30?% 0 %?18?%}.content .history-main .history-input[data-v-63051abc]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;background:#f6f6f6;border-radius:%?38?%;margin-right:%?30?%;height:%?80?%}.content .history-main .history-input .history-icon[data-v-63051abc]{font-size:%?30?%;margin-right:%?20?%;color:#959595}.content .history-main .history-input .history-icon-close[data-v-63051abc]{position:absolute;right:%?40?%;top:47%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);font-size:%?32?%;color:#959595}',""])},b413:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"history-main dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"history-input dis-flex flex-y-center p-left-right-30 p-r"},[i("v-uni-view",{staticClass:"history-icon iconfont icon-search"}),i("v-uni-input",{staticClass:"f-24",attrs:{type:"text",value:"",placeholder:"输入城市名或拼音查询"},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),t.searchText?i("v-uni-view",{staticClass:"history-icon-close iconfont icon-roundclose",on:{click:function(e){e=t.$handleEvent(e),t.closeSearch(e)}}}):t._e()],1),i("v-uni-view",{staticClass:"history-btn col-3 f-30",on:{click:function(e){e=t.$handleEvent(e),t.search(e)}}},[t._v("搜索")])],1),i("uni-select",{ref:"uniSelect",attrs:{iphoneModel:t.iphoneModel,isSearch:t.isSearch,navAttr:t.navAttr,listAttr:t.listAttr,quickPanelData:t.hotcity,listData:t.citylist,currentCity:t.addressData,searchCitylist:t.searchCitylist,recenCity:t.recenCity,location:t.location},on:{chooseItem:function(e){e=t.$handleEvent(e),t.chooseItem(e)}}})],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},cbe7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("99a1")),a=r(i("3099"));function r(t){return t&&t.__esModule?t:{default:t}}var o={components:{uniSelect:n.default},data:function(){return{citylist:null,hotcity:null,addressData:null,searchText:"",isSearch:!1,searchCitylist:null,location:null,listAttr:{listBackgroundColor:"none",titleFontSize:24,titleColor:"#999999",titleHeight:40,titleBackground:"#F6F6F6",titlePadding:28,itemHeight:80,itemFontSize:24,itemBorderBottom:"1px solid rgba(0, 0, 0, 0.1)",itemColor:"#333333"},navAttr:{enable:!0,backgroundColor:"#fffff",color:"#333",activeColor:"#333333",fontSize:24,itemPadding:"6 0",borderRadius:100,padding:"20 0"},recenCity:null,iphoneModel:null}},methods:{chooseItem:function(t){},search:function(){var t=this;uni.showLoading({}),a.default._post_form("&do=cityList",{keyword:t.searchText},function(e){console.log(e.data.citylist),t.setData({searchCitylist:e.data.citylist,isSearch:!0})},!1,function(){uni.hideLoading()})},getCurrentcity:function(t,e){var i=this,n={lat:t,lng:e};a.default._post_form("&do=cityLocation",n,function(t){console.log(t.data),i.setData({addressData:t.data})})},getCityList:function(){var t=this;a.default._post_form("&do=cityList",{},function(e){var i=e.data.citylist,n=[],a={};for(var r in i)a={initial:r,list:i[r]},n.push(a);t.setData({citylist:n,hotcity:e.data.hotcity,location:e.data.location})},!1,function(){uni.hideLoading()})},closeSearch:function(){this.setData({searchText:"",isSearch:!1}),this.$refs.uniSelect.scrollTop=0}},onLoad:function(){},mounted:function(){var t=this;uni.showLoading({}),a.default.getLocation().then(function(e){t.getCurrentcity(e.latitude,e.longitude)}),uni.getSystemInfo({success:function(t){console.log(t);var e=t.model,i=-1!==e.indexOf("iPhone");this.iphoneModel=i}}),this.recenCity=uni.getStorageSync("locationArray")||[],this.getCityList()},watch:{searchText:function(t,e){}}};e.default=o},cde6:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("3099"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){return l(t)||s(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}var c={components:{},data:function(){return{navData:[],toView:"sort0",scrollTop:0,disArray:[0],activeIndex:0,fadeFlag:!1,Timer:null,cityListData:""}},props:{listData:{type:Array,default:[]},quickPanelData:{type:Array,default:function(){return[]}},currentCity:{type:Object,default:function(){return{}}},iphoneModel:{type:Boolean,default:!1},navAttr:{type:Object,default:function(){return{}}},location:{type:Number,default:function(){return 0}},isSearch:{type:Boolean,default:!1},searchCitylist:{type:Array,default:function(){return[]}},recenCity:{type:Array,default:function(){return[]}},listAttr:{type:Object,default:function(){return{listBackgroundColor:"transport",titleFontSize:28,titleColor:"#333",titleHeight:60,titleBackground:"#ccc",titlePadding:20,itemHeight:80,itemFontSize:28,itemBorderBottom:"1px solid rgba(0, 0, 0, 0.1)",itemColor:"#333",itemBackgroundColor:"",itemMargin:20}}}},computed:{getNavData:function(){var t=this;if(this.listData&&this.listData.length>0)return this.listData.forEach(function(e,i){t.navData.push(e.initial)}),this.navData},getListAttrListBackgroundColor:function(){return this.listAttr.listBackgroundColor||"transport"},getListAttrTitleColor:function(){return this.listAttr.titleColor||"#333"},getListAttrTitleFontSize:function(){return uni.upx2px(this.listAttr.titleFontSize||24)+"px"},getListAttrTitleHeight:function(){return uni.upx2px(this.listAttr.titleHeight||60)+"px"},getListAttrTitleBackground:function(){return this.listAttr.titleBackground||"#ccc"},getListAttrTitlePadding:function(){return uni.upx2px(this.listAttr.titlePadding||20)+"px"},getListAttrItemHeight:function(){return uni.upx2px(this.listAttr.itemHeight||80)+"px"},getListAttrItemFontSize:function(){return uni.upx2px(this.listAttr.itemFontSize||28)+"px"},getListAttrItemColor:function(){return this.listAttr.itemColor||"#333"},getListAttrItemBackgroundColor:function(){return this.listAttr.itemBackgroundColor||""},getListAttrItemBorderBottom:function(){return this.listAttr.itemBorderBottom||"1px solid rgba(0, 0, 0, 0.1)"},getListAttrItemMargin:function(){return"0"+uni.upx2px(this.listAttr.itemFontSize||20)+"px"},getNavAttrbackgroundColor:function(){return this.navAttr.backgroundColor||"rgba(0, 0, 0, 0.4)"},getNavAttrColor:function(){return this.navAttr.color||"#333"},getNavAttrActiveColor:function(){return this.navAttr.activeColor||"#333"},getNavAttrFontSize:function(){return uni.upx2px(this.navAttr.fontSize||28)+"px"},getNavAttrItemPadding:function(){if(this.navAttr.itemPadding){var t="",e=this.navAttr.itemPadding.split(" ");return e.forEach(function(e,i){t+=uni.upx2px(e)+"px "}),t}return uni.upx2px(4)+"px "+uni.upx2px(8)+"px"},getNavAttrBorderRadius:function(){return uni.upx2px(this.navAttr.borderRadius||100)+"px"},getNavAttrPadding:function(){if(this.navAttr.itemPadding){var t="",e=this.navAttr.padding.split(" ");return e.forEach(function(e,i){t+=uni.upx2px(e)+"px "}),t}return uni.upx2px(0)+"px "+uni.upx2px(20)+"px"}},methods:{scrollSelect:function(t){var e=this;clearTimeout(this.Timer);var i=this.recenCity?this.iphoneModel?220:175:this.iphoneModel?115:95;this.scrollTop=this.disArray[t]+i,this.activeIndex=t,this.fadeFlag=!0,this.Timer=setTimeout(function(){e.fadeFlag=!1},1e3)},scroll:function(t){for(var e=this.disArray.length,i=0;i<e;i++)this.disArray[i]<t.detail.scrollTop&&this.disArray[i+1]>t.detail.scrollTop&&(this.activeIndex=i)},getDisArray:function(t){var e=this,i=e.disArray[0];t&&t.length>0&&t.forEach(function(t,n){var a=e.disArray.length-1;i=e.disArray[a]+(parseInt(e.getListAttrTitleHeight)+parseInt(e.getListAttrItemHeight)*t.list.length),e.disArray.push(i)})},chooseItem:function(t){if(console.log(t),this.$emit("chooseItem",t),t.location&&(t.lat=t.location.lat,t.lng=t.location.lng,t.name=t.city||t.ad_info.city,t.isCurrentAddress="1"),1===this.location)uni.navigateTo({url:"/pages/mainPages/city/selectAddress?"+n.default.urlEncode(t)});else{var e=getCurrentPages(),i=uni.getStorageSync("locationArray"),a=[];if(e.length>1?n.default.reLaunchTo({url:"pages/mainPages/index/index",success:function(){uni.setStorageSync("currentRegion",t)}}):n.default.navigationTo({url:"pages/mainPages/index/index",success:function(){uni.setStorageSync("currentRegion",t)}}),i){var o=0!==i.filter(function(e){return(e.ad_info?e.ad_info.city:e.name)===t.name}).length;if(console.log(o),o)return;a.push.apply(a,[t].concat(r(i))),uni.setStorageSync("locationArray",a)}else a.push(t),uni.setStorageSync("locationArray",a)}}},mounted:function(){},onLoad:function(){},watch:{listData:function(t,e){this.getDisArray(t)}}};e.default=c},eb46:function(t,e,i){var n=i("b052");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("113468f6",n,!0,{sourceMap:!1,shadowMode:!1})},ec98:function(t,e,i){"use strict";i.r(e);var n=i("cde6"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},fb94:function(t,e,i){var n=i("2839");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("d81daee8",n,!0,{sourceMap:!1,shadowMode:!1})}}]);